CREATE TABLE IF NOT EXISTS "user" (id uuid PRIMARY KEY, "name" TEXT NULL, username TEXT NOT NULL, hashed_password TEXT NOT NULL, salt TEXT NOT NULL, email TEXT NULL, roles TEXT[] NOT NULL, avatar_url TEXT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL);
CREATE TABLE IF NOT EXISTS refresh_token (id BIGSERIAL PRIMARY KEY, user_id uuid NOT NULL, token TEXT NOT NULL, created_at BIGINT NOT NULL, ttl INT NOT NULL, issuer TEXT NOT NULL, CONSTRAINT fk_refresh_token_user_id__id FOREIGN KEY (user_id) REFERENCES "user"(id) ON DELETE CASCADE ON UPDATE RESTRICT);
CREATE TABLE IF NOT EXISTS galaxy (id uuid PRIMARY KEY, "name" TEXT NOT NULL, url TEXT NOT NULL);
CREATE TABLE IF NOT EXISTS star (id uuid PRIMARY KEY, galaxy_id uuid NOT NULL, title TEXT NOT NULL, url TEXT NOT NULL, CONSTRAINT fk_star_galaxy_id__id FOREIGN KEY (galaxy_id) REFERENCES galaxy(id) ON DELETE CASCADE ON UPDATE RESTRICT);
CREATE SEQUENCE IF NOT EXISTS refresh_token_id_seq START WITH 1 MINVALUE 1 MAXVALUE 9223372036854775807;
